(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5b3"],{"36a7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Pagination",{staticClass:"is-pulled-right",staticStyle:{"margin-right":"0"},attrs:{total:t.meta.total,page:t.meta.current_page,"page-size":t.meta.per_page,"last-page":t.meta.last_page},on:{"change-page":function(e){t.$emit("change-page",e)}}})},r=[],s={props:["meta"]},i=s,l=a("2877"),u=Object(l["a"])(i,n,r,!1,null,null,null);u.options.__file="index.vue";e["a"]=u.exports},"727f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{domProps:{innerHTML:t._s(t.highlight)}})},r=[],s=(a("a481"),{props:{text:{},query:{}},computed:{highlight:function(){var t=this.query,e=null===this.text?"":this.text+"";return""===t?e:"string"===typeof e?e.replace(t,'<strong class="has-background-warning">'.concat(t,"</strong>")):e}}}),i=s,l=a("2877"),u=Object(l["a"])(i,n,r,!1,null,null,null);u.options.__file="index.vue";e["a"]=u.exports},"8c8c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.state=e.target.multiple?a:a[0]},function(e){t.$emit("change",t.state)}]}},[a("option",{domProps:{value:null}},[t._v("全部")]),a("option",{domProps:{value:0}},[t._v("待规划")]),a("option",{domProps:{value:1}},[t._v("规划中")]),a("option",{domProps:{value:2}},[t._v("已规划")])])])])},r=[],s={model:{prop:"value",event:"change"},props:{value:{}},data:function(){return{state:null}}},i=s,l=a("2877"),u=Object(l["a"])(i,n,r,!1,null,null,null);u.options.__file="TaskStatusSelect.vue";e["a"]=u.exports},b716:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"is-centered"},[a("span",{class:["tag","is-"+t.state.color]},[t._v("\n    "+t._s(t.state.text)+"\n  ")])])},r=[],s={props:{value:{}},data:function(){return{states:{0:{text:"待规划",color:"warning"},1:{text:"规划中",color:"info"},2:{text:"已完成",color:"success"}}}},computed:{state:function(){var t=this.states[this.value];return t||{color:"none",text:"其他"}}}},i=s,l=a("2877"),u=Object(l["a"])(i,n,r,!1,null,null,null);u.options.__file="TaskStatusCell.vue";e["a"]=u.exports},d919:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"is-centered"},[a("span",{class:["tag","is-"+t.state.color]},[t._v("\n    "+t._s(t.state.text)+"\n  ")])])},r=[],s={props:{value:{}},data:function(){return{states:{true:{text:"进行中",color:"success"},false:{text:"已归档",color:"info"}}}},computed:{state:function(){var t=this.states[null===this.value];return t||{color:"none",text:"其他"}}}},i=s,l=a("2877"),u=Object(l["a"])(i,n,r,!1,null,null,null);u.options.__file="ProjectStatusCell.vue";e["a"]=u.exports},f092:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-container is-flex is-flex-column",staticStyle:{padding:"0.5rem"}},[a("div",[a("div",{staticClass:"field has-addons"},[a("TaskStatusSelect",{model:{value:t.taskStatus,callback:function(e){t.taskStatus=e},expression:"taskStatus"}}),a("div",{staticClass:"control"},[a("input",{staticClass:"input",staticStyle:{width:"160px"},attrs:{type:"text"},domProps:{value:t.query},on:{change:t.handleQuery,keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleQuery(e):null}}})]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-info",class:{"is-loading":t.loading},on:{click:t.search}},[a("Icon",{attrs:{name:"search"}})],1)])],1)]),a("div",{staticClass:"full-container is-flex-auto",staticStyle:{"margin-top":"0.5rem"}},[a("div",{staticClass:"table-container"},[t.loading?t._e():a("table",{staticClass:"table is-bordered is-nowrapped"},[a("thead",[a("th",[t._v("零件号")]),a("th",[t._v("工位")]),a("th",[t._v("项目编号")]),a("th",[t._v("项目状态")]),a("th",[t._v("任务备注")]),a("th",[t._v("任务状态")]),t._l(t.areas,function(e){return a("th",{key:e.id},[t._v("\n            "+t._s(e.text)+"\n          ")])})],2),a("tbody",t._l(t.tasks,function(e){return a("tr",{key:e.id},[a("td",[a("QueryHighlighter",{attrs:{text:e.part_id,query:t.query}})],1),a("td",[a("QueryHighlighter",{attrs:{text:e.line_id,query:t.query}})],1),a("td",[a("QueryHighlighter",{attrs:{text:e.project.name,query:t.query}})],1),a("ProjectStatusCell",{attrs:{value:e.project.filed_at}}),a("td",[a("QueryHighlighter",{attrs:{text:e.comment,query:t.query}})],1),a("TaskStatusCell",{attrs:{value:e.status}}),t._l(t.areas,function(n){return a("td",{key:n.id,staticClass:"is-centered"},[a("Checkbox",{attrs:{value:Boolean(e.areas[n.id])},on:{click:function(a){t.$wait(function(){return t.handleClickArea(e,n.id)})}}})],1)})],2)}))])])]),a("div",{staticStyle:{"margin-top":"0.5rem"}},[a("Pagination",{attrs:{meta:t.meta},on:{"change-page":function(e){t.page=e,t.search()}}})],1)])},r=[],s=(a("386d"),a("ac6a"),a("96cf"),a("3040")),i=a("c93e"),l=(a("cadf"),a("551c"),a("097d"),a("2f62")),u=a("ea7f"),c=a("b716"),o=a("d919"),p=a("8c8c"),d=a("36a7"),h=a("727f"),f={name:"TaskAreasManage",components:{Pagination:d["a"],TaskStatusCell:c["a"],ProjectStatusCell:o["a"],TaskStatusSelect:p["a"],QueryHighlighter:h["a"]},props:{plantId:{}},data:function(){return{list:[],data:{},meta:{},page:1,query:"",taskStatus:null,loading:!0,initialized:!1}},computed:Object(i["a"])({params:function(){return{page:this.page,query:this.query,plantId:this.plantId,taskStatus:this.taskStatus}}},Object(l["e"])({tasks:function(){var t=this;return this.list.map(function(e){return t.data[e]})}}),Object(l["c"])({areasMapByPlantId:"areas/mapByPlantId"}),{areas:function(){return this.areasMapByPlantId[this.plantId]}}),methods:{search:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,u["a"].searchAreas(this.params);case 4:e=t.sent,this.data={},this.list=[],e.data.forEach(function(t){a.list.push(t.id),a.$set(a.data,t.id,t)}),this.meta=e;case 9:return t.prev=9,this.loading=!1,t.finish(9);case 12:case"end":return t.stop()}},t,this,[[1,,9,12]])}));return function(){return t.apply(this,arguments)}}(),handleQuery:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.query=e.target.value.trim(),""!==this.query&&this.search();case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),handleClickArea:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.areas[a]){t.next=6;break}return t.next=3,u["a"].removeArea({taskId:e.id,areaId:a});case 3:this.$delete(e.areas,a),t.next=9;break;case 6:return t.next=8,u["a"].addArea({taskId:e.id,areaId:a});case 8:this.$set(e.areas,a,{});case 9:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},watch:{plantId:{immediate:!0,handler:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.initialized=!1,t.next=3,this.search();case 3:this.initialized=!0;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}},v=f,g=a("2877"),m=Object(g["a"])(v,n,r,!1,null,null,null);m.options.__file="index.vue";e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-d5b3.a6994495.js.map