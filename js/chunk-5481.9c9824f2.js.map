{"version":3,"sources":["webpack:///./src/components/common/pagination/index.vue?b038","webpack:///src/components/common/pagination/index.vue","webpack:///./src/components/common/pagination/index.vue?b56c","webpack:///./src/components/common/pagination/index.vue","webpack:///./src/components/common/editable-cell/index.vue?a2db","webpack:///src/components/common/editable-cell/index.vue","webpack:///./src/components/common/editable-cell/index.vue?ab63","webpack:///./src/components/common/editable-cell/index.vue","webpack:///./src/app/plant-project-tasks/index.vue?595e","webpack:///./src/app/plant-project-tasks/status-cell.vue?bc83","webpack:///src/app/plant-project-tasks/status-cell.vue","webpack:///./src/app/plant-project-tasks/status-cell.vue?977e","webpack:///./src/app/plant-project-tasks/status-cell.vue","webpack:///./src/app/plant-project-tasks/duetime-cell.vue?c462","webpack:///src/app/plant-project-tasks/duetime-cell.vue","webpack:///./src/app/plant-project-tasks/duetime-cell.vue?66b2","webpack:///./src/app/plant-project-tasks/duetime-cell.vue","webpack:///src/app/plant-project-tasks/index.vue","webpack:///./src/app/plant-project-tasks/index.vue?475a","webpack:///./src/app/plant-project-tasks/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","margin-right","attrs","total","meta","page","current_page","page-size","per_page","last-page","last_page","on","change-page","$event","$emit","staticRenderFns","paginationvue_type_script_lang_js_","props","common_paginationvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","ref","class","is-editable","is-changed","isChanged","hasChanged","is-outlined","isOutlined","tabindex","domProps","innerHTML","_s","isFocused","value","matchedText","keypress","_k","keyCode","key","handleEsc","focus","handleFocus","blur","handleBlur","editable_cellvue_type_script_lang_js_","highlight","String","Boolean","data","inputValue","replace","concat","computed","watch","immediate","handler","methods","event","range","document","createRange","selection","window","getSelection","selectNodeContents","target","removeAllRanges","addRange","innerText","trim","valueEqual","$refs","td","foo","bar","common_editable_cellvue_type_script_lang_js_","projectId","padding","padding-left","click","$wait","handleTaskCreate","name","_v","height","directives","rawName","loading","expression","_m","_l","task","index","id","refInFor","comment","change","updateComment","part_id","updatePartId","partId","line_id","updateLineId","lineId","status","down","tasks","length","updateStatus","duetime","updateDuetime","created_at","slice","handleClickDestroy","margin-top","$page","search","_e","project","taskId","handleDestroy","destroyTask","width","status_cellvue_type_template_id_26e460f0_render","is-centered","is-hoverable","is-selectable","is-unselectable","isShowDropdown","min-width","max-width","state","color","text","is-up","style","display","states","status_cellvue_type_template_id_26e460f0_staticRenderFns","status_cellvue_type_script_lang_js_","0","1","2","res","plant_project_tasks_status_cellvue_type_script_lang_js_","status_cell","duetime_cellvue_type_template_id_7867cd9e_render","is-active","newValue","wrapper","duetime_cellvue_type_template_id_7867cd9e_staticRenderFns","duetime_cellvue_type_script_lang_js_","Number","plant_project_tasks_duetime_cellvue_type_script_lang_js_","duetime_cell_component","duetime_cell","plant_project_tasksvue_type_script_lang_js_","components","Pagination","pagination","StatusCell","DuetimeCell","EditableCell","editable_cell","plantId","list","query","initialized","_this","map","params","_handleTaskCreate","asyncToGenerator","regeneratorRuntime","mark","_callee","_this2","wrap","_context","prev","next","create","sent","splice","$set","$nextTick","comments","stop","apply","arguments","_handleClickDestroy","_callee2","_context2","$router","push","objectSpread","$route","_x","_search","_callee3","dataSource","_this3","_context3","forEach","item","finish","_updateComment","_callee4","_ref","_context4","_x2","_updateStatus","_callee5","_ref2","_context5","_x3","_updateDuetime","_callee6","_ref3","_context6","_x4","_updatePartId","_callee7","_ref4","_context7","updatePart","_x5","_updateLineId","_callee8","_ref5","_context8","updateLine","_x6","_destroyTask","_callee9","_ref6","_context9","destroy","indexOf","$delete","_x7","project.id","_handler","_callee10","_context10","app_plant_project_tasksvue_type_script_lang_js_","plant_project_tasks_component"],"mappings":"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","file":"js/chunk-5481.9c9824f2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Pagination',{staticClass:\"is-pulled-right\",staticStyle:{\"margin-right\":\"0\"},attrs:{\"total\":_vm.meta.total,\"page\":_vm.meta.current_page,\"page-size\":_vm.meta.per_page,\"last-page\":_vm.meta.last_page},on:{\"change-page\":function($event){_vm.$emit('change-page', $event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <Pagination\n      class=\"is-pulled-right\"\n      style=\"margin-right: 0\"\n      :total=\"meta.total\"\n      :page=\"meta.current_page\"\n      :page-size=\"meta.per_page\"\n      :last-page=\"meta.last_page\"\n      @change-page=\"$emit('change-page', $event)\"\n    />\n</template>\n\n<script>\nexport default {\n  props: ['meta']\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1d88be31&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',{ref:\"td\",class:{\n    'is-editable': true,\n    'is-changed': _vm.isChanged || _vm.hasChanged,\n    'is-outlined': _vm.isOutlined,\n  },attrs:{\"tabindex\":\"0\"},domProps:{\"innerHTML\":_vm._s(!_vm.isFocused && _vm.value ? _vm.matchedText : _vm.value)},on:{\"keypress\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleEsc($event)},\"focus\":_vm.handleFocus,\"blur\":_vm.handleBlur}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <td\n    :class=\"{\n      'is-editable': true,\n      'is-changed': isChanged || hasChanged,\n      'is-outlined': isOutlined,\n    }\"\n    v-html=\"!isFocused && value ? matchedText : value\"\n    @keypress.enter=\"handleEsc\"\n    @focus=\"handleFocus\"\n    @blur=\"handleBlur\"\n    tabindex=\"0\"\n    ref=\"td\"\n  />\n</template>\n\n<script>\n/**\n * value: 默认值数据\n * inputValue: 为用户输入的数据\n * isChange: 是否需要高亮数据\n */\nexport default {\n  props: {\n    value: {},\n    highlight: String,\n    isChanged: Boolean,\n    isOutlined: Boolean,\n  },\n\n  data () {\n    return {\n      inputValue: '',\n      isFocused: false,\n      matchedText: typeof this.value === 'string' ? this.value.replace(\n        this.highlight,\n        `<strong class=\"has-background-warning\">${this.highlight}</strong>`\n      ) : this.value\n    }\n  },\n\n  computed: {\n    hasChanged () {\n      return this.value !== '' &&\n        this.value !== null &&\n        this.value !== this.inputValue\n    }\n  },\n\n  watch: {\n    value: {\n      immediate: true,\n      handler () {\n        this.inputValue = this.value\n      }\n    }\n  },\n\n  methods: {\n    handleFocus (event) {\n      this.isFocused = true\n      const range = document.createRange()\n      const selection = window.getSelection()\n      range.selectNodeContents(event.target)\n      selection.removeAllRanges()\n      selection.addRange(range)\n    },\n\n    handleBlur (event) {\n      const range = document.createRange()\n      const selection = window.getSelection()\n      range.selectNodeContents(event.target)\n      selection.removeAllRanges()\n      this.inputValue = event.target.innerText.trim()\n      if (!valueEqual(this.value, this.inputValue)) {\n        this.$emit('change', this.inputValue)\n      }\n    },\n\n    // not working\n    handleEsc (event) {\n      event.target.blur()\n    },\n\n    focus () {\n      this.$refs.td.focus()\n    }\n  }\n}\n\nfunction valueEqual (foo, bar) {\n  if (foo === null) foo = ''\n  if (bar === null) bar = ''\n\n  return foo === bar\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=fa82d77c&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"full-container\"},[(_vm.projectId != -1)?_c('div',{staticClass:\"full-container is-flex is-flex-column\",staticStyle:{\"padding\":\"0.5rem\",\"padding-left\":\"0\"}},[_c('div',{staticClass:\"buttons has-addons\",staticStyle:{\"margin-right\":\"0.5rem\"}},[_c('a',{staticClass:\"button\",on:{\"click\":function($event){_vm.$wait(function () { return _vm.handleTaskCreate(); })}}},[_c('Icon',{attrs:{\"name\":\"create-record\"}}),_c('span',[_vm._v(\"创建任务\")])],1)]),_c('div',{staticStyle:{\"height\":\"0.5rem\"}}),_c('div',{staticClass:\"table-container is-flex-auto\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading),expression:\"!loading\"}],staticClass:\"full-container\"},[_c('table',{staticClass:\"table is-bordered is-nowrapped\"},[_vm._m(0),_c('tbody',_vm._l((_vm.tasks),function(task,index){return _c('tr',{key:task.id},[_c('td',{staticClass:\"is-centered\"},[_vm._v(_vm._s(index))]),_c('EditableCell',{ref:\"comments\",refInFor:true,attrs:{\"value\":task.comment},on:{\"change\":function($event){_vm.$wait(function () { return _vm.updateComment({id: task.id, comment: $event}); })}}}),_c('EditableCell',{attrs:{\"value\":task.part_id},on:{\"change\":function($event){_vm.$wait(function () { return _vm.updatePartId({id: task.id, partId: $event}); })}}}),_c('EditableCell',{attrs:{\"value\":task.line_id},on:{\"change\":function($event){_vm.$wait(function () { return _vm.updateLineId({id: task.id, lineId: $event}); })}}}),_c('StatusCell',{attrs:{\"value\":task.status,\"down\":_vm.tasks.length - index > 4},on:{\"change\":function($event){_vm.$wait(function () { return _vm.updateStatus({id: task.id, status: $event}); })}}}),_c('DuetimeCell',{attrs:{\"id\":task.id,\"value\":task.duetime},on:{\"change\":function($event){_vm.$wait(function () { return _vm.updateDuetime({id: task.id, duetime: $event}); })}}}),_c('td',{staticClass:\"is-centered\"},[_vm._v(_vm._s(task.created_at.slice(0, 10)))]),_c('td',{staticClass:\"is-centered\"},[_c('a',{on:{\"click\":function($event){_vm.handleClickDestroy(task.id)}}},[_vm._v(\"\\n                  删除\\n                \")])])],1)}))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"loading\"})]),_c('div',{staticStyle:{\"margin-top\":\"0.5rem\"}},[_c('Pagination',{attrs:{\"meta\":_vm.meta},on:{\"change-page\":function ($page) { _vm.page = $page, _vm.search() }}})],1)]):_vm._e(),_c('router-view',{attrs:{\"project\":_vm.project,\"task\":_vm.data[_vm.taskId],\"handleDestroy\":_vm.destroyTask}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('th',{staticClass:\"is-centered\",staticStyle:{\"width\":\"1px\"}},[_vm._v(\"#\")]),_c('th',[_vm._v(\"备注\")]),_c('th',[_vm._v(\"零件号\")]),_c('th',[_vm._v(\"工位\")]),_c('th',{staticClass:\"is-centered\",staticStyle:{\"width\":\"120px\"}},[_vm._v(\"任务状态\")]),_c('th',{staticClass:\"is-centered\"},[_vm._v(\"截止日期\")]),_c('th',{staticClass:\"is-centered\"},[_vm._v(\"创建时间\")]),_c('th',{staticClass:\"is-centered\"},[_vm._v(\"操作\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',{class:{\n    'is-centered': true,\n    'is-hoverable': true,\n    'is-selectable': true,\n    'is-unselectable': true,\n    'is-changed': _vm.isShowDropdown\n  },staticStyle:{\"min-width\":\"120px\",\"max-width\":\"120px\",\"padding\":\"0\"},on:{\"click\":function($event){_vm.isShowDropdown = !_vm.isShowDropdown}}},[_c('span',{class:['tag', 'is-' + _vm.state.color]},[_vm._v(\"\\n    \"+_vm._s(_vm.state.text)+\"\\n  \")]),_c('div',{staticClass:\"dropdown-menu\",class:{'is-up': !_vm.down},style:({ display: _vm.isShowDropdown ? 'block' : 'none' })},[_c('div',{staticClass:\"is-background\"}),_c('div',{staticClass:\"dropdown-content\",staticStyle:{\"width\":\"160px\"}},_vm._l(([0, 1, 2]),function(status){return _c('a',{key:status,staticClass:\"dropdown-item\",staticStyle:{\"padding-left\":\"2.5rem\"},on:{\"click\":function($event){_vm.$emit('change', status)}}},[_vm._v(\"\\n        \"+_vm._s(_vm.states[status].text)+\"\\n      \")])}))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <td\n    :class=\"{\n      'is-centered': true,\n      'is-hoverable': true,\n      'is-selectable': true,\n      'is-unselectable': true,\n      'is-changed': isShowDropdown\n    }\"\n    style=\"min-width: 120px; max-width: 120px; padding: 0\"\n    @click=\"isShowDropdown = !isShowDropdown\">\n    <span :class=\"['tag', 'is-' + state.color]\">\n      {{state.text}}\n    </span>\n    <div\n      class=\"dropdown-menu\"\n      :class=\"{'is-up': !down}\"\n      :style=\"{ display: isShowDropdown ? 'block' : 'none' }\">\n      <div class=\"is-background\"></div>\n      <div class=\"dropdown-content\" style=\"width: 160px\">\n        <a\n          v-for=\"status in [0, 1, 2]\" :key=\"status\"\n          style=\"padding-left: 2.5rem\"\n          class=\"dropdown-item\"\n          @click=\"$emit('change', status)\">\n          {{states[status].text}}\n        </a>\n      </div>\n    </div>\n  </td>\n</template>\n\n<script>\nexport default {\n  name: 'TaskStatus',\n\n  props: {\n    value: {},\n    down: Boolean,\n  },\n\n  data () {\n    return {\n      isShowDropdown: false,\n      states: {\n        0: { text: '待规划', color: 'warning' },\n        1: { text: '规划中', color: 'info' },\n        2: { text: '已规划', color: 'success' }\n      }\n    }\n  },\n\n  computed: {\n    state () {\n      const res = this.states[this.value]\n\n      if (res) return res\n      else return {\n        color: 'none',\n        text: '其他'\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./status-cell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./status-cell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./status-cell.vue?vue&type=template&id=26e460f0&\"\nimport script from \"./status-cell.vue?vue&type=script&lang=js&\"\nexport * from \"./status-cell.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"status-cell.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DatePicker',{staticClass:\"is-centered\",attrs:{\"is-active\":_vm.newValue !== _vm.value,\"wrapper\":\"td\",\"value\":_vm.value},on:{\"change\":function($event){_vm.$emit('change', $event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <DatePicker\n    class=\"is-centered\"\n    :is-active=\"newValue !== value\"\n    @change=\"$emit('change', $event)\"\n    wrapper=\"td\" :value=\"value\"\n  />\n</template>\n\n<script>\nexport default {\n  props: {\n    value: {},\n    id: Number\n  },\n\n  data () {\n    return {\n      newValue: ''\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./duetime-cell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./duetime-cell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./duetime-cell.vue?vue&type=template&id=7867cd9e&\"\nimport script from \"./duetime-cell.vue?vue&type=script&lang=js&\"\nexport * from \"./duetime-cell.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"duetime-cell.vue\"\nexport default component.exports","<template>\n  <div class=\"full-container\">\n    <div\n      v-if=\"projectId != -1\"\n      class=\"full-container is-flex is-flex-column\"\n      style=\"padding: 0.5rem; padding-left: 0;\">\n\n      <div class=\"buttons has-addons\" style=\"margin-right: 0.5rem\">\n        <a\n          @click=\"$wait(() => handleTaskCreate())\"\n          class=\"button\">\n          <Icon name=\"create-record\"/>\n          <span>创建任务</span>\n        </a>\n      </div>\n\n      <div style=\"height: 0.5rem\"></div>\n\n      <div class=\"table-container is-flex-auto\">\n        <div class=\"full-container\" v-show=\"!loading\">\n          <table class=\"table is-bordered is-nowrapped\">\n            <thead>\n              <th class=\"is-centered\" style=\"width: 1px\">#</th>\n              <th>备注</th>\n              <th>零件号</th>\n              <th>工位</th>\n              <th class=\"is-centered\" style=\"width: 120px;\">任务状态</th>\n              <th class=\"is-centered\" >截止日期</th>\n              <th class=\"is-centered\" >创建时间</th>\n              <th class=\"is-centered\">操作</th>\n            </thead>\n            <tbody>\n              <tr v-for=\"(task, index) in tasks\" :key=\"task.id\">\n                <td class=\"is-centered\">{{index}}</td>\n                <EditableCell\n                  ref=\"comments\"\n                  :value=\"task.comment\"\n                  @change=\"$wait(() => updateComment({id: task.id, comment: $event}))\"\n                />\n                <EditableCell\n                  :value=\"task.part_id\"\n                  @change=\"$wait(() => updatePartId({id: task.id, partId: $event}))\"\n                />\n                <EditableCell\n                  :value=\"task.line_id\"\n                  @change=\"$wait(() => updateLineId({id: task.id, lineId: $event}))\"\n                />\n                <StatusCell\n                  :value=\"task.status\"\n                  :down=\"tasks.length - index > 4\"\n                  @change=\"$wait(() => updateStatus({id: task.id, status: $event}))\"\n                />\n                <DuetimeCell\n                  :id=\"task.id\"\n                  :value=\"task.duetime\"\n                  @change=\"$wait(() => updateDuetime({id: task.id, duetime: $event}))\"\n                />\n                <td class=\"is-centered\">{{task.created_at.slice(0, 10)}}</td>\n                <td class=\"is-centered\">\n                  <a @click=\"handleClickDestroy(task.id)\">\n                    删除\n                  </a>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div v-show=\"loading\" class=\"loading\" />\n      </div>\n\n      <div style=\"margin-top: 0.5rem\">\n        <Pagination\n          :meta=\"meta\"\n          @change-page=\"$page => { page = $page, search() }\"\n        />\n      </div>\n    </div>\n    <router-view\n      :project=\"project\"\n      :task=\"data[taskId]\"\n      :handleDestroy=\"destroyTask\"\n    />\n  </div>\n</template>\n\n<script>\nimport tasks from '@/api/tasks'\n\nimport StatusCell from './status-cell'\nimport DuetimeCell from './duetime-cell'\nimport Pagination from '@/components/common/pagination'\nimport EditableCell from '@/components/common/editable-cell'\n\nexport default {\n  name: 'ProjectTasks',\n\n  components: {\n    Pagination,\n    StatusCell,\n    DuetimeCell,\n    EditableCell\n  },\n\n  props: {\n    taskId: {},\n    plantId: {},\n    projectId: {},\n    project: Object,\n  },\n\n  data () {\n    return {\n      data: {},\n      list: [],\n      meta: {},\n\n      page: 1,\n      query: '',\n      loading: false,\n      initialized: false,\n    }\n  },\n\n  computed: {\n    tasks () {\n      return this.list.map(id => this.data[id])\n    },\n\n    params () {\n      return {\n        page: this.page,\n        query: this.query,\n        projectId: this.projectId\n      }\n    }\n  },\n\n  methods: {\n    async handleTaskCreate () {\n      const task = await tasks.create({projectId: this.projectId})\n      this.list.splice(0, 0, task.id)\n      this.$set(this.data, task.id, task)\n      this.$nextTick(() => {\n        // 运用 vue.js 的底层复用原理来寻找最新创建的 vnode\n        this.$refs.comments[this.$refs.comments.length - 1].focus()\n      })\n    },\n\n    async handleClickDestroy (id) {\n      this.$router.push({\n        name: 'task destroy',\n        params: { taskId: id, ...this.$route.params }\n      })\n    },\n\n    async search () {\n      this.loading = true\n      try {\n        const dataSource = await tasks.search(this.params)\n        this.data = {}\n        this.list = []\n\n        dataSource.data.forEach(item => {\n          this.list.push(item.id)\n          this.$set(this.data, item.id, item)\n        })\n\n        this.meta = dataSource\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async updateComment ({id, comment}) {\n      await tasks.updateComment({id, comment})\n      this.data[id].comment = comment\n    },\n\n    async updateStatus ({id, status}) {\n      await tasks.updateStatus({id, status})\n      this.data[id].status = status\n    },\n\n    async updateDuetime ({id, duetime}) {\n      if (this.data[id].duetime === duetime) {\n        duetime = null\n      }\n      await tasks.updateDuetime({id, duetime})\n      this.data[id].duetime = duetime\n    },\n\n    async updatePartId ({id, partId}) {\n      await tasks.updatePart({id, partId})\n      this.data[id].part_id = partId\n    },\n\n    async updateLineId ({id, lineId}) {\n      await tasks.updateLine({id, lineId})\n      this.data[id].line_id = lineId\n    },\n\n    async destroyTask ({id}) {\n      const task = await tasks.destroy({id})\n      this.list.splice(this.list.indexOf(id), 1)\n      this.$delete(this.data, id)\n    }\n  },\n\n  watch: {\n    'project.id': {\n      immediate: true,\n\n      async handler () {\n        if (this.projectId !== -1 && this.projectId !== '-1') {\n        this.initialized = false\n          await this.search()\n          this.initialized = true\n        }\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2bbf4890&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}